---
layout: post
published: false
title: Community Server 2.0 Upgrade
tags: [Community Server, Software Development, blogging, SQL Server]
permalink: /2006-07-29-community-server-20-upgrade.html
description: You may have noticed the new look to the site (a big thanks to the folks at .NET Monster for the skin). I recently spent two exquisitely painful days upgrading
summary: You may have noticed the new look to the site (a big thanks to the folks at <a href="http://www.dotnetmonster.com/">.NET Monster</a> for the skin). I recently spent two exquisitely painful days upgrading to Community Server 2.0. This wasn't because of the Community Server upgrade itself, but instead a factor of several other things, most of which happened to manifest themselves via the upgrade process (as they usually do).<br /><br />In any event, I did run across several very frustrated, unanswered posts on the telligent website (whats up with that?) about some pretty cryptic errors, many of which I saw during the upgrade process. For those of you that still havent upgraded (although I might have been the last to jump on the wagon), heres a quick summary of what I found and how I got things to work:<br />
---
<div>You may have noticed the new look to the site (a big thanks to the folks at <a href="http://www.dotnetmonster.com/">.NET Monster</a> for the skin). I recently spent two exquisitely painful days upgrading to Community Server 2.0. This wasn't because of the Community Server upgrade itself, but instead a factor of several other things, most of which happened to manifest themselves via the upgrade process (as they usually do).<br /><br />In any event, I did run across several very frustrated, unanswered posts on the telligent website (whats up with that?) about some pretty cryptic errors, many of which I saw during the upgrade process. For those of you that still havent upgraded (although I might have been the last to jump on the wagon), heres a quick summary of what I found and how I got things to work:<br /><a name='more'></a><br /><ul><li>First, a word to the wise: if at all possible, backup everything, then try the upgrade process on a test machine first. I am personally skeptical about an in-place upgrade of any production database, and its a good thing I did this  the first couple of times my database was left hosed because of failures in the upgrade script. I realize that this should go without saying, but I was surprised at the number of people who had posted to telligents forums with messages like: Its 3AM. I just tried to upgrade and there was a problem. My website is down now!! Why arent you answering me?!?!</li><li>Most of the strange errors that I saw were because of some problem with the Community Server SQL upgrade scripts. If there are any failures in the script, your database WILL be mangled and CS2 will probably not work correctly, though it may not be totally obvious why.</li><li>In a shared hosting environment -- especially using MSSQL 2005 -- you probably wont have the appropriate database rights to successfully execute the scripts. This turned out to be the root of most of my headaches. Also keep in mind that copying database objects using SQL Server Management Studio works very differently that in Enterprise Manager, and doing so requires different rights on the database server. So, if you are moving up to MSSQL 2005 from MSSQL 2000 and are on shared hosting, youre probably not going to have adequate rights to move the complete database. This will cause the database upgrade script to fail since constraints and the like will be missing. I found the easiest solution to be to detach the old database, make a copy, and reattach it to on the new server. The upgrade scripts should then run without a hitch.</li><li>My second biggest hurdle was getting the single-blog configuration to work. telligent has made this somewhat easier in the 2.0 release, but its still far from perfect. <a href="http://blog.danbartels.com/archive/2005/12/27//1138.aspx">Don Bartels has documented the process</a> for running a single blog at the website root. This wont work as easily for you if you are using a non-standard path to your blog, however. After struggling with this for several hours, I decided to try <a href="http://qgyen.net/archive/2006/01/09/1196.aspx">Ken Robertsons URL rewriter</a> and was up and running within ten minutes. Thanks a million Ken!</li></ul><br />Despite the sometimes quirky upgrade process, the latest release of Community Server is a major improvement over its predecessor (which was excellent in its own right). If you havent checked it out yet, you should. Visit <a href="http://www.communityserver.org/">http://www.communityserver.org/</a> for more information.<br /><br />klc;</div>